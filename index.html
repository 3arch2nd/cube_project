<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì •ìœ¡ë©´ì²´ ì™„ì „ ì •ë³µ</title>
    <meta property="og:title" content="ì •ìœ¡ë©´ì²´ ì™„ì „ ì •ë³µ">
    <meta property="og:description" content="ì „ê°œë„ ì™„ì„±í•˜ê¸° / ê²¹ì³ì§€ëŠ” ë¶€ë¶„ ì°¾ê¸° ë¬¸ì œ ìë™ ìƒì„±">
    <meta name="description" content="Educational Web App for Elementary School Learning | Education / School / Study / Quiz / Learning Activity for Students" />
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    
    <style>
        body { margin: 0; font-family: 'Gowun Dodum', sans-serif; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; background-color: #f4f7f6; color: #333; text-align: center; }
        .container { position: relative; width: 90%; max-width: 900px; margin: 20px auto; background: #fff; border-radius: 12px; padding: 25px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); box-sizing: border-box; }
        h1 { color: #4b8134; margin-top: 60px; margin-bottom: 20px; font-size: 2em; }
        h2 { margin-bottom: 15px; font-size: 1.5em; }
        h3 { margin-top: 0; margin-bottom: 10px; }
        small { display: block; font-size: 16px; color: #6c757d; line-height: 1.5; }
        .mode-description { font-size: 14px; margin-top: 5px; }
        button { font-family: inherit; padding: 12px 20px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 5px; transition: background-color 0.3s, transform 0.1s; }
        button:hover { transform: translateY(-1px); }
        .green-btn { background:#92c572; color:white; }
        .gray-btn { background:#e5e5e5; }
        .orange-btn { background:#ffc457; }
        .red-btn { background:#dd6666; color:white; }
        .primary-btn { background-color: #a0c179; color: white; }
        .primary-btn:hover { background-color: #8cb24b; }
        .secondary-btn { background-color: #e9e9e9; color: #333; }
        .secondary-btn:hover { background-color: #d9d9d9; }
        button.selected { background:#ffc107 !important; color:#333 !important; font-weight:bold; }
        
        .hidden { display:none !important; }
        
        .section { margin-top:20px; padding:20px; border-radius:12px; background:#fafafa; border:1px solid #ddd; }
        .option-row { display:flex; justify-content:center; flex-wrap:wrap; gap:10px; margin-top:10px; }
        #mode-select-page { padding-top: 10px; padding-bottom: 30px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 15px; }
        .mode-buttons { display: flex; gap: 15px; margin-top: 10px; width: 100%; justify-content: space-around; }
        .mode-buttons button { padding: 20px 30px; font-size: 18px; width: 100%; max-width: 250px; }
        .mode-option { flex: 1; display: flex; flex-direction: column; align-items: center; }
        #setup-net, #setup-overlap { display: flex; flex-direction: column; align-items: center; width: 100%; }
        .main-layout { display: flex; flex-direction: row; gap: 20px; width: 100%; align-items: stretch; flex-wrap: wrap; justify-content: center; }
        .left-panel { flex: 2; display: flex; flex-direction: column; gap: 20px; min-width: 300px; }
        .right-panel { flex: 1; display: flex; flex-direction: column; gap: 20px; min-width: 300px; }
        .start-btn-container { border: none; background-color: transparent; padding: 0; display: flex; justify-content: center; align-items: center; flex-grow: 1; }
        #start-net, #start-overlap { width: 100px; height: 100px; border-radius: 50%; font-size: 20px; font-weight: bold; display: flex; justify-content: center; align-items: center; padding: 0; flex-shrink: 0; }
        #quantity-control { display: flex; align-items: center; justify-content: center; gap: 15px; }
        #quantity-control button { width: 30px; height: 30px; border-radius: 50%; padding: 0; margin: 0; font-size: 20px; font-weight: bold; line-height: 30px; background-color: #f0f0f0; border: 1px solid #ccc; color: #333; }
        .quantity-display { font-size: 22px; font-weight: bold; }
        .problem-header { display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 15px; }
        .header-home-btn { position: absolute; top: 20px; left: 20px; z-index: 10; }
        .home-button { background-color: #e9e9e9; color: #333; border-radius: 8px; padding: 8px 12px; font-size: 14px; display: flex; align-items: center; gap: 5px; cursor: pointer; text-decoration: none; }
        #problem-title { flex-grow: 1; text-align: center; margin: 0; font-size: 1.5em; }
        .canvas-wrapper, .three-view-wrapper { max-width: 350px; max-height: 350px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin: 20px auto; width: 100%; box-sizing: border-box; aspect-ratio: 1 / 1; display: block; }
        
        /* ğŸ‘‡ [ìˆ˜ì •] ìº”ë²„ìŠ¤ ìŠ¤íƒ€ì¼: ëª¨ë°”ì¼ í„°ì¹˜ ì˜¤ë¥˜(ìŠ¤í¬ë¡¤, ì¤Œ, í•˜ì´ë¼ì´íŠ¸) ë°©ì§€ ì½”ë“œ ì¶”ê°€ */
        #net-canvas, #three-view { 
            width:100%; height:100%; 
            background:white; 
            border:2px solid #333; 
            box-sizing: border-box;
            
            /* ëª¨ë°”ì¼ í„°ì¹˜ ë°€ë¦¼ ë°©ì§€ í•µì‹¬ ì½”ë“œ */
            touch-action: none; 
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }
        
        #three-view { background:#000; margin: 0; transform: translateZ(0); will-change: transform; }
        #fold-control { margin: 10px auto 20px; padding: 10px 20px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 8px; max-width: 350px; width: 90%; display: flex; align-items: center; justify-content: space-between; gap: 15px; }
        .slider-label { font-size: 15px; font-weight: bold; color: #555; white-space: nowrap; }
        #fold-slider { flex-grow: 1; cursor: pointer; }
        .problem-footer { display: flex; justify-content: center; align-items: center; width: 100%; margin-top: 30px; padding-bottom: 20px; clear: both; }
        #check-answer-container { display: flex; flex-direction: column; align-items: center; gap: 10px; width: 100%; }
        #btn-check { position: relative; overflow: hidden; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; background-color: white; color: black; border: 2px solid #999; min-width: 200px; height: 50px; font-size: 1.1em; transition: border-color 0.3s; display: flex; justify-content: center; align-items: center; }
        #btn-check:hover { background-color: #f0f0f0; }
        #btn-next { min-width: 200px; height: 50px; font-size: 1.1em; background:#ffc457; color:#333; }
        #btn-check .progress-bar { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: #92c572; transform: translateX(-100%); z-index: 0; }
        #btn-check .button-text { position: relative; z-index: 1; }
        .check-answer-guide { font-size: 14px; color: #888; margin: 0; text-align: center; }

        .final-result-layout { display: flex; flex-direction: row; justify-content: center; align-items: stretch; margin: 30px 0; gap: 30px; border: 1px solid #eee; padding: 30px 20px; border-radius: 12px; }
        .result-left { flex: 1; border-right: 1px solid #eee; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 10px; }
        .result-right { flex: 1.2; padding: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 12px; }
        .result-right p { margin: 0; font-size: 1.1em; color: #555; }
        .result-highlight { color: #333; font-weight: bold; }
        #result-acc { font-size: 4.5em; font-weight: bold; color: #4b8134; margin-top: 15px; }
        .result-buttons { display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 30px; flex-wrap: wrap; }

        .popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background: rgba(0, 0, 0, 0.4); z-index: 100; }
        .popup-box { background-color: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); position: relative; width: 80%; max-width: 450px; text-align: center; display: flex; flex-direction: column; align-items: center; }
        .popup-box .close-btn { position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; color: #333; cursor: pointer; background: none; border: none; padding: 0; }
        .result-popup #popup-main-message { font-size: 1.4em; font-weight: bold; margin-bottom: 0; line-height: 1.5; }
        .correct { color: #28a745; } .incorrect { color: #dc3545; }
        #popup-next-btn-modal { margin-top: 20px; }
        
        
        #qr-popup { position:fixed; left:0; top:0; width:100%; height:100%; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.5); z-index:1000; }
        
        
        #qr-box { background:white; padding:30px; border-radius:12px; text-align:center; }
        #hof-list td { padding: 8px; border-bottom: 1px solid #eee; font-size: 1.1em; }
        #hof-list tr:nth-child(1) td { color: #d4af37; font-weight: bold; }
        #hof-list tr:nth-child(2) td { color: #a9a9a9; font-weight: bold; }
        #hof-list tr:nth-child(3) td { color: #cd7f32; font-weight: bold; }

        .footer { margin-top: 20px; font-size: 12px; color: #ccc; text-align: center; padding-bottom: 10px; }

        @media (max-width: 900px) {
            .main-layout { flex-direction: column; flex-wrap: nowrap; align-items: center; }
            .left-panel, .right-panel { min-width: 90%; max-width: 90%; width: 100%; margin: 0 auto; }
            .left-panel { flex-direction: column; gap: 10px; }
            .right-panel { margin-top: 10px; }
            .section { margin-top: 10px; padding: 15px; }
            .option-row button { flex-grow: 1; }
            .final-result-layout { flex-direction: column; }
            .result-left { border-right: none; border-bottom: 1px solid #eee; padding-bottom: 20px; margin-bottom: 20px; width: 100%; box-sizing: border-box;}
            .result-right { width: 100%; box-sizing: border-box; }
            .canvas-wrapper, .three-view-wrapper { width: 90%; max-width: 350px; margin-left: auto; margin-right: auto; }
            #fold-control { width: 90%; max-width: 320px; }
            .header-home-btn { position: static; display: inline-flex; align-self: flex-start; margin-bottom: 15px; }
        }
        
        .desktop-title, .desktop-home { display: inline; } .mobile-title, .mobile-home { display: none; }
        @media (max-width: 480px) {
            .container { padding: 15px; margin: 10px auto; }
            h1 { font-size: 1.6em; margin-bottom: 15px; margin-top: 60px; }
            h2 { font-size: 1.3em; }
            #mode-select-page { padding-top: 20px; padding-bottom: 20px; }
            .desktop-title { display: none; } .mobile-title { display: inline; }
            .desktop-home { display: none; } .mobile-home { display: inline; }
            #qr-btn { top: 10px; right: 10px; padding: 5px 10px; font-size: 14px; }
            .home-button { padding: 5px 8px; }
            .result-left, .result-right { padding: 10px; }
            #result-acc { font-size: 3em; }
        }
    </style>
</head>

<body>

<div class="container">
    <button id="qr-btn" class="secondary-btn" style="position:fixed; top:20px; right:20px;">QR ì½”ë“œ</button>
    <h1><span class="desktop-title">ì •ìœ¡ë©´ì²´ ì™„ì „ ì •ë³µ</span><span class="mobile-title">ì •ìœ¡ë©´ì²´ ì™„ì „ ì •ë³µ</span></h1>

    <div id="mode-select-page">
        <h2>í•™ìŠµ ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”.</h2>
        <div class="mode-buttons">
            <div class="mode-option"><button class="primary-btn" id="btn-mode-net">ğŸ“¦ ì „ê°œë„ ì™„ì„±í•˜ê¸°</button><small class="mode-description">ë¹ ì§„ ë©´ì˜ ìœ„ì¹˜ë¥¼ ì°¾ì•„ì„œ<br>ì˜¬ë°”ë¥¸ ì „ê°œë„ë¥¼ ì™„ì„±í•´ ë³´ì„¸ìš”.</small></div>
            <div class="mode-option"><button class="orange-btn" id="btn-mode-overlap">ğŸ¯ ê²¹ì³ì§€ëŠ” ë¶€ë¶„ ì°¾ê¸°</button><small class="mode-description">ì „ê°œë„ë¥¼ ì ‘ì—ˆì„ ë•Œ<br>ì–´ë–¤ ë¶€ë¶„ì´ ì„œë¡œ ë§ë‹¿ëŠ”ì§€ ì°¾ì•„ë³´ì„¸ìš”.</small></div>
        </div>
    </div>

    <div id="setup-net" class="hidden">
        <button id="back-to-mode-select-btn" class="home-button header-home-btn"><span class="desktop-home">ğŸ  ëª¨ë“œ ì„ íƒìœ¼ë¡œ</span><span class="mobile-home">ğŸ </span></button>
        <h2 id="setup-title">ì „ê°œë„ ì™„ì„±í•˜ê¸° - ì„¤ì •</h2>
        <div class="main-layout">
            <div class="left-panel">
                <div class="section"><h3>ë‚œì´ë„</h3><div class="option-row" id="net-run-group"><button data-run="practice" class="gray-btn selected">â˜…</button><button data-run="real" class="gray-btn">â˜…â˜…</button></div></div>
                <div class="section"><h3>ë¬¸ì œ ê°œìˆ˜</h3><div id="quantity-control"><button id="net-q-minus">-</button><span id="net-q-display" class="quantity-display">5</span><button id="net-q-plus">+</button></div></div>
            </div>
            <div class="right-panel"><div class="start-btn-container"><button id="start-net" class="primary-btn">ì‹œì‘!</button></div></div>
        </div>
    </div>

    <div id="setup-overlap" class="hidden">
        <button id="back-to-mode-select-btn-ov" class="home-button header-home-btn"><span class="desktop-home">ğŸ  ëª¨ë“œ ì„ íƒìœ¼ë¡œ</span><span class="mobile-home">ğŸ </span></button>
        <h2 id="setup-title-ov">ê²¹ì³ì§€ëŠ” ë¶€ë¶„ ì°¾ê¸° - ì„¤ì •</h2>
        <div class="main-layout">
            <div class="left-panel">
                <div class="section"><h3>ë¬¸ì œ ìœ í˜• ì„ íƒ</h3><div class="option-row" id="ov-type-group"><button data-type="point" class="gray-btn selected">ì </button><button data-type="edge" class="gray-btn">ì„ ë¶„</button><button data-type="both" class="gray-btn">ë‘˜ ë‹¤</button></div></div>
                <div class="section"><h3>ë‚œì´ë„</h3><div class="option-row" id="ov-run-group"><button data-run="practice" class="gray-btn selected">â˜…</button><button data-run="real" class="gray-btn">â˜…â˜…</button></div></div>
            </div>
            <div class="right-panel">
                <div class="section"><h3>ë¬¸ì œ ê°œìˆ˜</h3><div id="quantity-control"><button id="ov-q-minus">-</button><span id="ov-q-display" class="quantity-display">5</span><button id="ov-q-plus">+</button></div></div>
                <div class="start-btn-container"><button id="start-overlap" class="primary-btn">ì‹œì‘!</button></div>
            </div>
        </div>
    </div>

    <div id="problem-page" class="hidden">
        <div class="problem-header">
            <button class="home-button" id="btn-exit"><span class="desktop-home">ğŸ  ì¢…ë£Œ</span><span class="mobile-home">ğŸ </span></button>
            <h2 id="problem-title">ë¬¸ì œ 1/10</h2>
        </div>
        <div class="main-layout" style="margin-top: 20px;">
            <div class="canvas-wrapper"><canvas id="net-canvas" width="350" height="350"></canvas></div>
            <div class="three-view-wrapper"><canvas id="three-view" width="350" height="350"></canvas><div id="fold-control" class="hidden"><span class="slider-label">í´ê¸°</span><input type="range" id="fold-slider" min="0" max="1" step="0.01" value="0"><span class="slider-label">ì ‘ê¸°</span></div></div>
        </div>
        <div class="problem-footer">
            <div id="check-answer-container">
                <button id="btn-check" class="primary-btn"><span class="progress-bar"></span><span class="button-text">ì •ë‹µ í™•ì¸í•˜ê¸°</span></button>
                <button id="btn-next" class="primary-btn hidden">ë‹¤ìŒ ë¬¸ì œ ë„ì „í•˜ê¸°</button>
                <small class="check-answer-guide">ê¾¹ ëˆ„ë¥´ê³  ìˆìœ¼ë©´ ì±„ì ë©ë‹ˆë‹¤!</small>
            </div>
        </div>
    </div>

    <div id="result-page" class="hidden">
        <h2 id="final-result-title">í•™ìŠµ ê²°ê³¼</h2>
        <div class="final-result-layout">
            <div class="result-left">
                <p>ë‚˜ì˜ ì •í™•ë„</p>
                <div id="result-acc">0%</div>
            </div>
            
            <div class="result-right">
                <p>ì´ ë¬¸ì œ ìˆ˜: <span id="res-total" class="result-highlight">0</span>ê°œ</p>
                <p>í•œ ë²ˆì— ë§ì¶˜ ë¬¸ì œ: <span id="res-first" class="result-highlight">0</span>ê°œ</p>
                <p>ë‹¤ì‹œ ë„ì „í•´ ë§ì¶˜ ë¬¸ì œ: <span id="res-retry" class="result-highlight">0</span>ê°œ</p>
                <div id="res-score-area"></div> </div>
        </div>
        
        <div class="result-buttons">
            <button id="btn-restart" class="primary-btn">ìƒˆë¡œìš´ í•™ìŠµ ì‹œì‘í•˜ê¸°</button>
            </div>
    </div>

</div>

<div class="footer">Copyright Â© 2025 íœ´ë¥´ìŒ¤. All rights reserved.</div>

<div id="result-popup-overlay" class="popup-overlay hidden"><div class="result-popup popup-box"><button class="close-btn" id="popup-close-btn">&times;</button><div class="popup-content"><p id="popup-main-message" class="correct"></p><button id="popup-next-btn-modal" class="primary-btn">ë‹¤ìŒ ë¬¸ì œ ë„ì „í•˜ê¸°</button></div></div></div>
<div id="hof-popup-overlay" class="popup-overlay hidden"><div class="popup-box" style="max-width: 500px;"><button class="close-btn" id="hof-close-btn">&times;</button><h3 style="color:#4b8134;">ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹ ğŸ†</h3><p style="font-size:0.9em; color:#666; margin-top:-10px;">ì˜¤ëŠ˜ì˜ 'ê²¹ì³ì§€ëŠ” ë¶€ë¶„ ì°¾ê¸°' ê³ ìˆ˜ëŠ”?</p><div id="hof-top-scorer" style="background:#fff3cd; padding:10px; border-radius:8px; margin-bottom:15px; width:100%; box-sizing:border-box; display:none;"><strong>ğŸ‘‘ ì—­ëŒ€ ìµœê³  ë“ì  ğŸ‘‘</strong><br><span id="top-scorer-info" style="font-size:1.2em; color:#d63384;"></span></div><div class="hof-input-group" style="margin: 20px 0;"><input type="text" id="hof-initial" placeholder="AAA" maxlength="3" style="padding:8px; width:80px; text-align:center; text-transform:uppercase; font-size:1.2em; border:2px solid #ddd; border-radius:6px;"><button id="hof-submit-btn" class="primary-btn" style="padding:8px 15px;">ë“±ë¡</button></div><div id="hof-message" style="margin-bottom:10px; font-size:0.9em;"></div><div style="width:100%; max-height:250px; overflow-y:auto; border-top:1px solid #eee;"><table style="width:100%; border-collapse:collapse; margin-top:10px;"><thead><tr style="background:#f9f9f9; border-bottom:2px solid #ddd;"><th style="padding:8px;">ìˆœìœ„</th><th>ì´ë‹ˆì…œ</th><th>ì ìˆ˜</th></tr></thead><tbody id="hof-list"></tbody></table></div></div></div>

<div id="qr-popup" class="hidden"><div id="qr-box"><h3>QR ì½”ë“œ</h3><div id="qr-holder"></div><button id="qr-close" class="secondary-btn" style="margin-top:20px;">ë‹«ê¸°</button></div></div>

<script src="https://cdn.babylonjs.com/babylon.max.js"></script>
<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.js"></script>

<script src="./js/bundle.js"></script>

<script>
    const slider = document.getElementById("fold-slider");
    if (slider) { slider.addEventListener("input", (e) => { const v = Number(e.target.value); if (typeof FoldEngine !== "undefined" && FoldEngine.setFoldProgress) { FoldEngine.setFoldProgress(v); } }); }
    
    document.addEventListener("DOMContentLoaded", () => {
        const modalCloseBtn = document.getElementById('popup-close-btn');
        if(modalCloseBtn && window.CubeProject && window.CubeProject.closePopup) { modalCloseBtn.onclick = window.CubeProject.closePopup; }
        const modalNextBtn = document.getElementById('popup-next-btn-modal');
        if(modalNextBtn && window.CubeProject && window.CubeProject.nextProblem) { modalNextBtn.onclick = window.CubeProject.nextProblem; }
        
        
        const btnQR = document.getElementById("qr-btn"), 
              popup = document.getElementById("qr-popup"), 
              holder = document.getElementById("qr-holder"), 
              qrClose = document.getElementById("qr-close");
              
        if (btnQR && popup && holder && qrClose) {
            btnQR.onclick = () => { 
                
                popup.classList.remove("hidden");
                popup.style.display = "flex"; 
                
                holder.innerHTML = ""; 
                const currentUrl = window.location.href.split('?')[0];
                
                
                if(typeof QRCode !== 'undefined') { 
                    new QRCode(holder, { text: currentUrl, width: 180, height: 180 }); 
                } else { 
                    holder.innerHTML = "<p>QR ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨</p>"; 
                }
            };
            qrClose.onclick = () => {
                
                popup.classList.add("hidden");
                popup.style.display = "none";
            };
        }
    });
</script>
</body>
</html>
