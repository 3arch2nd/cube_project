<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" 
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    
    <title>ì…ì²´ë„í˜• ì „ê°œë„ ì™„ì „ ì •ë³µ</title>

    <!-- OpenGraph -->
    <meta property="og:title" content="ì…ì²´ë„í˜• ì „ê°œë„ ì™„ì „ ì •ë³µ">
    <meta property="og:description" content="ì „ê°œë„ ë¬¸ì œ, ì¡°ê° ë°°ì¹˜, ê²¹ì¹˜ëŠ” ì /ì„  ë¬¸ì œë¥¼ ì—°ìŠµí•´ë³´ì„¸ìš”!">
    <meta property="og:image" content="https://i.imgur.com/XT0OsoI.png">
    <meta property="og:url" content="https://your-domain-or-github.io/cube_project/">
    <meta property="og:type" content="website">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" 
          rel="stylesheet" />

    <!-- Three.js (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

    <style>
    /* ===== ê³µí†µ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ===== */

    body {
        font-family: 'Gowun Dodum', sans-serif;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        background-color: #f4f7f6;
        color: #333;
        text-align: center;
    }

    .container {
        position: relative;
        background-color: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        width: 90%;
        max-width: 760px;
        margin: 20px auto;
        box-sizing: border-box;
    }

    h1 { color: #4b8134; margin-bottom: 20px; font-size: 2em; }
    h2 { margin-bottom: 5px; }

    small {
        display: block;
        font-size: 18px;
        color: #6c757d;
        margin-bottom: 20px;
        line-height: 1.5;
    }

    button {
        font-family: inherit;
        padding: 10px 20px;
        margin: 5px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color .3s, transform .1s;
    }

    button:hover { transform: translateY(-1px); }

    .primary-btn {
        background-color: #a0c179;
        color: white;
    }
    .primary-btn:hover {
        background-color: #8cb24b;
    }

    .secondary-btn {
        background-color: #e9e9e9;
        color: #333;
    }
    .secondary-btn:hover {
        background-color: #d9d9d9;
    }

    /* QR ë²„íŠ¼ */
    #qr-code-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 5px 10px;
        font-size: 14px;
    }

    /* ======================
        í˜ì´ì§€ë³„ display ì œì–´
    ====================== */
    #mode-selection-page,
    #setup-page,
    #problem-page,
    #final-result-page {
        display: none;
    }

    /* ========== ëª¨ë“œ ì„ íƒ í˜ì´ì§€ ========== */

    .mode-buttons {
        display: flex;
        gap: 20px;
        margin-top: 20px;
        justify-content: center;
        width: 100%;
    }

    .mode-option {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }

    /* ========== Three.js ì˜ì—­ ========== */

    .canvas-wrapper {
        width: 100%;
        height: 420px;
        margin: 0 auto 15px;
        border: 2px solid #333;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
    }

    #three-view {
        width: 100%;
        height: 100%;
        display: block;
    }

    /* ========== í’€ì´ ì•„ë˜ ë²„íŠ¼ë“¤ ========== */
    .problem-footer {
        margin-top: 20px;
        display: flex;
        justify-content: center;
    }

    /* ========== íŒì—… ========== */
    .popup-overlay {
        position: fixed;
        top:0; left:0;
        width:100%; height:100%;
        display:flex;
        justify-content:center;
        align-items:center;
        background-color:rgba(255,255,255,0.8);
        z-index:100;
    }

    .popup-box {
        background-color:white;
        padding:30px;
        border-radius:12px;
        box-shadow:0 4px 15px rgba(0,0,0,0.2);
        max-width:450px;
        width:80%;
        text-align:center;
    }

    .popup-box .close-btn {
        position:absolute;
        top:10px; right:15px;
        font-size:26px; 
        cursor:pointer;
        background:none;
        border:none;
    }

    /* ëª¨ë°”ì¼ ëŒ€ì‘ */
    @media (max-width: 480px){
        h1 { font-size: 1.6em; }
        .container { padding: 20px; }
        .canvas-wrapper { height: 300px; }
    }
    </style>
</head>

<body>

<div class="container">

    <!-- QR ë²„íŠ¼ -->
    <button id="qr-code-btn" class="secondary-btn">QR ì½”ë“œ</button>

    <!-- ========== â‘  ëª¨ë“œ ì„ íƒ í˜ì´ì§€ ========== -->
    <div id="mode-selection-page">
        <h1>ì…ì²´ë„í˜• ì™„ì „ ì •ë³µ</h1>
        <h2>ëª¨ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>

        <div class="mode-buttons">

            <div class="mode-option">
                <button id="classic-mode-btn" class="primary-btn">ğŸ“ í´ë˜ì‹ ëª¨ë“œ</button>
                <small>ì›í•˜ëŠ” ë§Œí¼ ë¬¸ì œë¥¼ í’€ë©° ì‹¤ë ¥ì„ ìŒ“ì•„ìš”!</small>
            </div>

            <div class="mode-option">
                <button id="time-attack-mode-btn" class="primary-btn"
                        style="background:#e06666">â± íƒ€ì„ì–´íƒ</button>
                <small>ì •í•´ì§„ ì‹œê°„ ë™ì•ˆ ë¹ ë¥´ê²Œ í’€ê¸°!</small>
            </div>

        </div>
    </div>

    <!-- ========== â‘¡ ì„¤ì • í˜ì´ì§€ ========== -->
    <div id="setup-page">

        <button id="back-to-mode-select-btn"
                class="home-button secondary-btn"
                style="position:absolute;top:20px;left:20px;">
            ëª¨ë“œ ì„ íƒìœ¼ë¡œ
        </button>

        <h1>ì…ì²´ë„í˜• ì™„ì „ ì •ë³µ</h1>
        <h2>ë¬¸ì œ ìœ í˜• ë° ì„¤ì •</h2>

        <div class="main-layout">

            <!-- ì™¼ìª½ íŒ¨ë„: ë¬¸ì œ ìœ í˜• & ë‚œì´ë„ -->
            <div class="left-panel">

                <!-- ë¬¸ì œ ìœ í˜• -->
                <div class="setting-group">
                    <h3>ë¬¸ì œ ìœ í˜• ì„ íƒ</h3>
                    <div class="option-buttons" id="type-select">
                        <button data-type="net" class="selected">ì „ê°œë„</button>
                        <button data-type="overlap">ê²¹ì¹˜ëŠ” ì /ì„ </button>
                        <button data-type="both">ë‘˜ ë‹¤</button>
                    </div>
                </div>

                <!-- ë‚œì´ë„ -->
                <div class="setting-group">
                    <h3>ë‚œì´ë„ ì„ íƒ</h3>
                    <div class="option-buttons" id="difficulty-select">
                        <button data-difficulty="practice">ì—°ìŠµ</button>
                        <button data-difficulty="1" class="selected">â˜…</button>
                        <button data-difficulty="2">â˜…â˜…</button>
                    </div>
                </div>

            </div>

            <!-- ì˜¤ë¥¸ìª½: ë¬¸ì œ ìˆ˜ or ì‹œê°„ ì„¤ì • -->
            <div class="right-panel">

                <div class="settings-wrapper">

                    <div id="classic-settings">
                        <div class="setting-group">
                            <h3>ë¬¸ì œ ê°œìˆ˜</h3>
                            <div id="quantity-control">
                                <button id="quantity-minus">-</button>
                                <span id="problem-quantity" class="quantity-display">5</span>
                                <button id="quantity-plus">+</button>
                            </div>
                        </div>
                    </div>

                    <div id="time-attack-settings" style="display:none;">
                        <div class="setting-group">
                            <h3>ë„ì „ ì‹œê°„</h3>
                            <div id="time-control">
                                <button id="time-minus">&lt;</button>
                                <span id="time-limit-display" class="quantity-display">
                                    3ë¶„
                                </span>
                                <button id="time-plus">&gt;</button>
                            </div>
                        </div>
                    </div>

                    <div id="settings-overlay" style="display:none;"></div>

                </div>

                <div class="setting-group start-btn-container">
                    <button id="start-quiz-btn" class="primary-btn">ì‹œì‘!</button>
                </div>

            </div>
        </div>

    </div>
    <!-- ========== â‘¢ ë¬¸ì œ í’€ì´ í˜ì´ì§€ ========== -->
    <div id="problem-page">

        <!-- Navigation to settings -->
        <button id="back-to-settings-btn"
                class="home-button secondary-btn"
                style="position:absolute;top:20px;left:20px;">
            ì„¤ì •ìœ¼ë¡œ
        </button>

        <h1>ë¬¸ì œ í’€ì´</h1>

        <div id="problem-info">
            <h2 id="problem-type-label">ì „ê°œë„ ë¬¸ì œ</h2>
            <small id="problem-counter-label">(1 / n)</small>
        </div>

        <p id="problem-instruction">
            ì „ê°œë„ë¥¼ ë³´ê³  ë¹ˆ ì¡°ê°ì„ ì•Œë§ì€ ìœ„ì¹˜ì— ë°°ì¹˜í•´ë³´ì„¸ìš”.
        </p>

        <!-- Three.js ë Œë”ë§ ì˜ì—­ -->
        <div class="canvas-wrapper">
            <canvas id="three-view"></canvas>
        </div>

        <!-- í’€ì´ í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="problem-footer">
            <button id="check-answer-btn" class="primary-btn">
                ì •ë‹µ í™•ì¸
            </button>
        </div>

        <!-- í’€ì´ ì •ë³´ -->
        <div id="problem-progress"
             style="margin-top:15px;color:#666;font-size:16px;">
            <span id="timer-display"></span>
        </div>
    </div>


    <!-- ========== â‘£ ìµœì¢… ê²°ê³¼ í˜ì´ì§€ ========== -->
    <div id="final-result-page">

        <h1>ë„ì „ ê²°ê³¼</h1>

        <div id="final-score-box" class="score-box">
            <h2>ì •ë‹µë¥ </h2>
            <p id="score-summary" style="font-size:22px;font-weight:bold;">
                -
            </p>

            <h3>í‰ê·  í’€ì´ ì‹œê°„</h3>
            <p id="average-time-label">-</p>
        </div>

        <div class="button-row" style="margin-top:30px;">
            <button id="register-record-btn" class="primary-btn">ëª…ì˜ˆì˜ ì „ë‹¹ ë“±ë¡</button>
            <button id="go-home-btn" class="secondary-btn">ì²˜ìŒìœ¼ë¡œ</button>
        </div>
    </div>


</div> <!-- container ë -->


<!-- ========== â‘¤ QR íŒì—… ========== -->
<div id="qr-popup" class="popup-overlay" style="display:none;">
    <div class="popup-box" style="position:relative;">
        <button id="close-qr-btn" class="close-btn">&times;</button>
        <h2>QR ì½”ë“œ</h2>
        <div id="qr-holder" style="margin-top:15px;"></div>
    </div>
</div>

<!-- ========== â‘¥ ëª…ì˜ˆì˜ì „ë‹¹ ê¸°ë¡ íŒì—…(í–¥í›„ GAS ì—°ë™) ========== -->
<div id="record-popup" class="popup-overlay" style="display:none;">
    <div class="popup-box" style="position:relative;">
        <button id="close-record-popup-btn" class="close-btn">&times;</button>

        <h2>ëª…ì˜ˆì˜ ì „ë‹¹ ë“±ë¡</h2>
        <p>ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</p>

        <input id="record-name-input"
               type="text"
               placeholder="ì˜ˆ: í™ê¸¸ë™"
               style="width:80%;padding:10px;border-radius:8px;border:1px solid #ccc;font-size:16px;">

        <div class="button-row" style="margin-top:20px;">
            <button id="send-record-btn" class="primary-btn">ë“±ë¡</button>
        </div>
    </div>
</div>

<!-- ========== â‘¦ Three.jsÂ·ì „ê°œë„Â·ì• ë‹ˆë©”ì´ì…˜ JS ì—°ê²° ========== -->

<!-- ë¬¸ì œ ìƒì„±ìš© ì „ê°œë„ 11ì¢… -->
<script src="js/cube_nets.js"></script>

<!-- Three.js ì ‘í˜ ì—”ì§„ -->
<script src="js/foldEngine.js"></script>

<!-- ì •ë‹µ íŒì •(ì ‘ìœ¼ë©´ íë¸Œ ë˜ëŠ”ì§€, ì /ì„  ê²¹ì¹¨ íŒì •) -->
<script src="js/validator.js"></script>

<!-- ì /ì„  ê²¹ì¹¨ ë¬¸ì œ ì „ìš© -->
<script src="js/overlap.js"></script>

<!-- UI ì²˜ë¦¬ (ì „ê°œë„ í‘œì‹œ, í›„ë³´ ìœ„ì¹˜ í‘œì‹œ, í´ë¦­ ì¸í„°ë™ì…˜) -->
<script src="js/ui.js"></script>

<!-- ì•± ì „ì²´ íë¦„ ì»¨íŠ¸ë¡¤ -->
<script src="js/main.js"></script>

</body>
</html>
